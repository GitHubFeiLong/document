## 1 Spring Cloud Stream

​	在实际的企业开发中，消息中间件是至关重要的组件之一。消息中间件主要解决应用解耦，异步消息，流量削峰等问题，实现高性能，高可用，可伸缩和最终一致性架构。不同的中间件其实现方式，内部结构是不一样的。如常见的RabbitMQ和Kafka，由于这两个消息中间件的架构上的不同，像RabbitMQ有exchange，kafka有Topic，partitions分区，这些中间件的差异性导致我们实际项目开发给我们造成一定的困扰，我们如果用了两个消息队列的其中一种，后面的业务需求，我们想往另外一种消息队列进行迁移，这时候无疑是一个灾难性的，一大堆东西要推到重新做，因为他跟我们的系统耦合了，这时候spring cloud Stream给我们提供了一种解耦合的方式

### 概述

Spring Cloud Stream由一个中间件中立的核组成。应用通过Spring Cloud Stream插入的input（相当于消费者consumer，它是从队列中接收消息的）和output（相当于生产者product，它是从队列中发送消息的）通道与外界交流。通道通过指定中间件的Binder实现与外部代理连接。业务开发者不再关注具体消息中间件，只需关注Binder对应程序提供的抽象概念来使用消息中间件实现业务即可。

![1575697748867](..\typora-user-images\1575697748867.png)

### 核心概念

#### 绑定器

​	Binder绑定器是Spring Cloud Stream中一个非常重要的概念。在没有绑定器这个 概念的情况下，我们的Spring Boot应用要直接与消息中间件进行信息交互的时候，由于个消息中间件构建的初衷不同，他们的实现细节上会后较大的差异性，这使得我们实现的消息交互逻辑就会非常笨重，因为对具体的中间件实现细节有太重的依赖，当中间件有较大的变动升级、或是更换中间件的时候，我们就需要付出非常大的代价来实施。

通过定义绑定器作为中间层，实现了应用程序与中间件（Middleware）细节之间的隔离。通过向应用程序暴露统一的Channel通过，使得应用程序不需要再考虑各种不同的消息中间件的实现。当需要升级消息中间件，或者是更换其他消息中间件产品时，我们需要做的就是更换对应的Binder绑定器而不需要修改任何应用逻辑。甚至可以任意的改变中间的类型而不需要修改一行代码

## 2 配置中心

### Spring Cloud Config配置中心

### 配置中心Apollo